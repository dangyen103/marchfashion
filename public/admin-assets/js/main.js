
// ---------------------------------------
/* DATA TABLES */
$('#datatable').dataTable( {
    "language": {
        "decimal":        "",
        "emptyTable":     "Không có dữ liệu",
        "info":           "_START_ - _END_ trong số _TOTAL_",
        "infoEmpty":      "0 - 0 trong số 0",
        "infoFiltered":   "(lọc từ _MAX_ bản ghi)",
        "infoPostFix":    "",
        "thousands":      ",",
        "lengthMenu":     "Hiển thị _MENU_",
        "loadingRecords": "Đang tải...",
        "processing":     "Processing...",
        "search":         "Tìm kiếm:",
        "zeroRecords":    "Không tìm thấy bản ghi nào",
        "paginate": {
            "first":      "Đầu",
            "last":       "Cuối",
            "next":       "Tiếp",
            "previous":   "Sau"
        },
        "aria": {
            "sortAscending":  ": kích hoạt sắp xếp cột tăng dần",
            "sortDescending": ": kích hoạt sắp xếp cột giảm dần"
        }
    }
} );

$('#datatable1').dataTable({
    "language": {
        "decimal":        "",
        "emptyTable":     "Không có dữ liệu",
        "info":           "_START_ - _END_ trong số _TOTAL_",
        "infoEmpty":      "0 - 0 trong số 0",
        "infoFiltered":   "(lọc từ _MAX_ bản ghi)",
        "infoPostFix":    "",
        "thousands":      ",",
        "lengthMenu":     "Hiển thị _MENU_",
        "loadingRecords": "Đang tải...",
        "processing":     "Processing...",
        "search":         "Tìm kiếm:",
        "zeroRecords":    "Không tìm thấy bản ghi nào",
        "paginate": {
            "first":      "Đầu",
            "last":       "Cuối",
            "next":       "Tiếp",
            "previous":   "Sau"
        },
        "aria": {
            "sortAscending":  ": kích hoạt sắp xếp cột tăng dần",
            "sortDescending": ": kích hoạt sắp xếp cột giảm dần"
        }
    }
});

$('#datatable2').dataTable({
    "language": {
        "decimal":        "",
        "emptyTable":     "Không có dữ liệu",
        "info":           "_START_ - _END_ trong số _TOTAL_",
        "infoEmpty":      "0 - 0 trong số 0",
        "infoFiltered":   "(lọc từ _MAX_ bản ghi)",
        "infoPostFix":    "",
        "thousands":      ",",
        "lengthMenu":     "Hiển thị _MENU_",
        "loadingRecords": "Đang tải...",
        "processing":     "Processing...",
        "search":         "Tìm kiếm:",
        "zeroRecords":    "Không tìm thấy bản ghi nào",
        "paginate": {
            "first":      "Đầu",
            "last":       "Cuối",
            "next":       "Tiếp",
            "previous":   "Sau"
        },
        "aria": {
            "sortAscending":  ": kích hoạt sắp xếp cột tăng dần",
            "sortDescending": ": kích hoạt sắp xếp cột giảm dần"
        }
    }
});

$('#datatable3').dataTable({
    "language": {
        "decimal":        "",
        "emptyTable":     "Không có dữ liệu",
        "info":           "_START_ - _END_ trong số _TOTAL_",
        "infoEmpty":      "0 - 0 trong số 0",
        "infoFiltered":   "(lọc từ _MAX_ bản ghi)",
        "infoPostFix":    "",
        "thousands":      ",",
        "lengthMenu":     "Hiển thị _MENU_",
        "loadingRecords": "Đang tải...",
        "processing":     "Processing...",
        "search":         "Tìm kiếm:",
        "zeroRecords":    "Không tìm thấy bản ghi nào",
        "paginate": {
            "first":      "Đầu",
            "last":       "Cuối",
            "next":       "Tiếp",
            "previous":   "Sau"
        },
        "aria": {
            "sortAscending":  ": kích hoạt sắp xếp cột tăng dần",
            "sortDescending": ": kích hoạt sắp xếp cột giảm dần"
        }
    }
});

$('#datatable4').dataTable({
    "language": {
        "decimal":        "",
        "emptyTable":     "Không có dữ liệu",
        "info":           "_START_ - _END_ trong số _TOTAL_",
        "infoEmpty":      "0 - 0 trong số 0",
        "infoFiltered":   "(lọc từ _MAX_ bản ghi)",
        "infoPostFix":    "",
        "thousands":      ",",
        "lengthMenu":     "Hiển thị _MENU_",
        "loadingRecords": "Đang tải...",
        "processing":     "Processing...",
        "search":         "Tìm kiếm:",
        "zeroRecords":    "Không tìm thấy bản ghi nào",
        "paginate": {
            "first":      "Đầu",
            "last":       "Cuối",
            "next":       "Tiếp",
            "previous":   "Sau"
        },
        "aria": {
            "sortAscending":  ": kích hoạt sắp xếp cột tăng dần",
            "sortDescending": ": kích hoạt sắp xếp cột giảm dần"
        }
    }
});

$('#datatable5').dataTable({
    "language": {
        "decimal":        "",
        "emptyTable":     "Không có dữ liệu",
        "info":           "_START_ - _END_ trong số _TOTAL_",
        "infoEmpty":      "0 - 0 trong số 0",
        "infoFiltered":   "(lọc từ _MAX_ bản ghi)",
        "infoPostFix":    "",
        "thousands":      ",",
        "lengthMenu":     "Hiển thị _MENU_",
        "loadingRecords": "Đang tải...",
        "processing":     "Processing...",
        "search":         "Tìm kiếm:",
        "zeroRecords":    "Không tìm thấy bản ghi nào",
        "paginate": {
            "first":      "Đầu",
            "last":       "Cuối",
            "next":       "Tiếp",
            "previous":   "Sau"
        },
        "aria": {
            "sortAscending":  ": kích hoạt sắp xếp cột tăng dần",
            "sortDescending": ": kích hoạt sắp xếp cột giảm dần"
        }
    }
});

$('#datatable6').dataTable({
    "language": {
        "decimal":        "",
        "emptyTable":     "Không có dữ liệu",
        "info":           "_START_ - _END_ trong số _TOTAL_",
        "infoEmpty":      "0 - 0 trong số 0",
        "infoFiltered":   "(lọc từ _MAX_ bản ghi)",
        "infoPostFix":    "",
        "thousands":      ",",
        "lengthMenu":     "Hiển thị _MENU_",
        "loadingRecords": "Đang tải...",
        "processing":     "Processing...",
        "search":         "Tìm kiếm:",
        "zeroRecords":    "Không tìm thấy bản ghi nào",
        "paginate": {
            "first":      "Đầu",
            "last":       "Cuối",
            "next":       "Tiếp",
            "previous":   "Sau"
        },
        "aria": {
            "sortAscending":  ": kích hoạt sắp xếp cột tăng dần",
            "sortDescending": ": kích hoạt sắp xếp cột giảm dần"
        }
    }
});





//-------------------------------------
// Alert



// -------------------------------------------
// Gallery
// ------------------------------------
function openGalleryImg(imgs) {
    
    var galleryImgView = document.getElementById("galleryImgView");
    
    galleryImgView.src = imgs.src;

    galleryImgView.parentElement.style.display = "block";
}
// -------------------------------------


// ------------------------------------
// Add and removw row in Table
// --------------------------------
$( document ).ready(function() {
    var rows = $('#detailProdTable tbody tr').length;
    if( rows == 1) {
        $('#removeTableRow').attr('style','background-color: #ccc; border-color: #ccc; cursor: not-allowed;');
    }
});

// Add
$( "#addTableRow" ).click(function() {
    $('#detailProdTable').append(`<tr><td><select name="size[]" id="size" class="form-control" required><option value="Freesize">Freesize</option><option value="S">S</option><option value="M">M</option><option value="L">L</option><option value="XL">Xl</option><option value="XXL">XXL</option><option value="XXXL">XXL</option><option value="35">35</option><option value="36">36</option><option value="37">37</option><option value="38">38</option><option value="39">39</option><option value="40">40</option></select></td><td><input id="color" name="color[]" class="form-control" required placeholder="Nhập màu sắc" value="None" type="text"></td><td><input id="quantity" name="quantity[]" class="form-control" required value="1" min="1" type="number"></td></tr>`);
    if( $('#removeTableRow').attr('style') ){
        $('#removeTableRow').removeAttr('style');
    }
});

//Remove
$('#removeTableRow').click(function(){
    var rows = $('#detailProdTable tbody tr').length;
    if( rows > 1) {
        $('#detailProdTable tbody tr:last').remove();
        var curRows =  $('#detailProdTable tbody tr').length;
        if( curRows == 1) {
            $('#removeTableRow').attr('style','background-color: #ccc; border-color: #ccc; cursor: not-allowed;');
        }
    }
});

// --------------Phone row------------------
$( document ).ready(function() {
    var rows = $('#phoneInputGroup input').length;
    if( rows == 1) {
        $('#removePhoneRow').attr('style','background-color: #ccc; border-color: #ccc; cursor: not-allowed;');
    }
});

// Add
$( "#addPhoneRow" ).click(function() {
    $('#phoneInputGroup').append(`<input name="contact_phones[]" type="text" class="form-control" placeholder="Nhập số điện thoại">`);
    if( $('#removePhoneRow').attr('style') ){
        $('#removePhoneRow').removeAttr('style');
    }
});

//Remove
$('#removePhoneRow').click(function(){
    var rows = $('#phoneInputGroup input').length;
    if( rows > 1) {
        $('#phoneInputGroup input:last').remove();
        var curRows =  $('#phoneInputGroup input').length;
        if( curRows == 1) {
            $('#removePhoneRow').attr('style','background-color: #ccc; border-color: #ccc; cursor: not-allowed;');
        }
    }
});

// --------------Shop row------------------
$( document ).ready(function() {
    var rows = $('#shopInputGroup input').length;
    if( rows == 1) {
        $('#removeShopRow').attr('style','background-color: #ccc; border-color: #ccc; cursor: not-allowed;');
    }
});

// Add
$( "#addShopRow" ).click(function() {
    $('#shopInputGroup').append(`<input name="shop_addresses[]" type="text" class="form-control"placeholder="Nhập địa chỉ cửa hàng">`);
    if( $('#removeShopRow').attr('style') ){
        $('#removeShopRow').removeAttr('style');
    }
});

//Remove
$('#removeShopRow').click(function(){
    var rows = $('#shopInputGroup input').length;
    if( rows > 1) {
        $('#shopInputGroup input:last').remove();
        var curRows =  $('#shopInputGroup input').length;
        if( curRows == 1) {
            $('#removeShopRow').attr('style','background-color: #ccc; border-color: #ccc; cursor: not-allowed;');
        }
    }
});
// --------------------------------


// ------------------------
// img checkbox
// ---------------------------
// init the state from the input
$(".image-checkbox").each(function () {
    if ($(this).find('input[type="checkbox"]').first().attr("checked")) {
      $(this).addClass('image-checkbox-checked');
    }
    else {
      $(this).removeClass('image-checkbox-checked');
    }
  });
  
  // sync the state to the input
  $(".image-checkbox").on("click", function (e) {
    $(this).toggleClass('image-checkbox-checked');
    var $checkbox = $(this).find('input[type="checkbox"]');
    $checkbox.prop("checked",!$checkbox.prop("checked"))
  
    e.preventDefault();
  });
// -------------------



// -----------------------------------
// Multi select + search
// -----------------------------------
function matchCustom(params, data) {
    // If there are no search terms, return all of the data
    if ($.trim(params.term) === '') {
      return data;
    }

    // Do not display the item if there is no 'text' property
    if (typeof data.text === 'undefined') {
      return null;
    }

    // `params.term` should be the term that is used for searching
    // `data.text` is the text that is displayed for the data object
    if (data.text.indexOf(params.term) > -1) {
      var modifiedData = $.extend({}, data, true);
      modifiedData.text += ' (khớp)';

      // You can return modified objects from here
      // This includes matching the `children` how you want in nested data sets
      return modifiedData;
    }

    // Return `null` if the term should not be displayed
    return null;
}

$(document).ready(function() {
    $('.select-multiple').select2({
        matcher: matchCustom,
        placeholder: 'Nhập hoặc chọn tên sản phẩm',
    });
});

// ------------------------------------------------------


// ------------------------------------------
// CKeditor
// --------------------------------------------
CKEDITOR.replace('post-editor',{
    // Adding drag and drop image upload.
    uploadUrl: '/marchfashion/public/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files&responseType=json',

    // Configure your file manager integration. This example uses CKFinder 3 for PHP.
    filebrowserBrowseUrl: '/marchfashion/public/ckfinder/ckfinder.html',
    filebrowserImageBrowseUrl: '/marchfashion/public/ckfinder/ckfinder.html?type=Images',
    filebrowserUploadUrl: '/marchfashion/public/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files',
    filebrowserImageUploadUrl: '/marchfashion/public/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images'

});

CKEDITOR.replace('post-editor-1', {
    // Adding drag and drop image upload.
    uploadUrl: '/marchfashion/public/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files&responseType=json',

    // Configure your file manager integration. This example uses CKFinder 3 for PHP.
    filebrowserBrowseUrl: '/marchfashion/public/ckfinder/ckfinder.html',
    filebrowserImageBrowseUrl: '/marchfashion/public/ckfinder/ckfinder.html?type=Images',
    filebrowserUploadUrl: '/marchfashion/public/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files',
    filebrowserImageUploadUrl: '/marchfashion/public/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images'
});
// ------------------------------------------


// -------------------------------
// Confirm password
// -----------------------------
// $('#password, #confirm_password').on('keyup', function () {
//     if ($('#password').val() == $('#confirm_password').val()) {
//       $('#message').html('Matching').css('color', 'green');
//     } else 
//       $('#message').html('Not Matching').css('color', 'red');
// });
// ---------------------------------